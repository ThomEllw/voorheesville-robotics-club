---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const reviews = await getCollection('reviews');
---

<BaseLayout
  title="Product Reviews"
  description="Hands-on reviews of components, tools, and kits used by the Voorheesville Robotics Club."
>
  <div class="py-12">
    <div class="container mx-auto px-4 max-w-4xl">
      <header class="mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">Product Reviews</h1>
        <p class="text-xl text-gray-600">Practical, student-tested reviews of new tech, team kits, components, and more.</p>
      </header>

      <div class="space-y-8">
        {reviews.length > 0 ? (
          reviews.map((review) => (
            <article class="border rounded-lg p-6 hover:shadow-md transition-shadow">
              <h2 class="text-2xl font-bold mb-2">{review.data.title}</h2>
              <p class="text-gray-600 mb-4">{review.data.description}</p>
              <div class="flex items-center gap-4 mb-4">
                {review.data.rating && <span class="font-medium text-blue-600">{review.data.rating}/10</span>}
                <a href={`/product-review/${review.id.replace(/\.md$/, '')}`} class="text-blue-600 hover:text-blue-700 font-medium">Read full review â†’</a>
              </div>
            </article>
          ))
        ) : (
          <div class="border rounded-lg p-6">
            <p class="text-gray-600">No reviews published yet. Be the first to submit one!</p>
          </div>
        )}

        <!-- Placeholder / contribution CTA -->
        <section class="bg-gray-50 p-6 rounded-lg text-center">
          <h3 class="text-xl font-bold mb-2">Have a product to review?</h3>
          <p class="text-gray-600 mb-4">If your team tried a part or kit and has notes, we'd love to publish community reviews.</p>
          <a href="/contact" class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Submit a Review</a>
        </section>
      </div>
    </div>
  </div>
</BaseLayout>
